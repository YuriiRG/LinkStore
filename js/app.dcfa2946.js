(function(t){function e(e){for(var i,l,r=e[0],c=e[1],s=e[2],u=0,b=[];u<r.length;u++)l=r[u],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&b.push(a[l][0]),a[l]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(b.length)b.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(i=!1)}i&&(o.splice(e--,1),t=l(l.s=n[0]))}return t}var i={},a={app:0},o=[];function l(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=i,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(n,i,function(e){return t[e]}.bind(null,i));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/LinkStore/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var s=0;s<r.length;s++)e(r[s]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1f68":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23");function a(t,e,n,a,o,l){var r=Object(i["l"])("main-layout");return Object(i["j"])(),Object(i["c"])(r)}n("b0c0"),n("9911");var o={class:"d-flex flex-row flex-grow-1"},l={class:"bg-light border-end action-sidebar"},r=Object(i["f"])("div",{class:"border action-icon-block btn vimium-button",title:"Add new link","data-bs-toggle":"modal","data-bs-target":"#new-link-model"},[Object(i["f"])("i",{class:"bi bi-file-earmark-plus action-icon"})],-1),c=Object(i["f"])("div",{class:"border action-icon-block btn vimium-button",title:"Add new folder","data-bs-toggle":"modal","data-bs-target":"#new-folder-model"},[Object(i["f"])("i",{class:"bi bi-folder-plus action-icon"})],-1),s=Object(i["f"])("i",{class:"bi bi-file-earmark-x action-icon"},null,-1),d=[s],u=Object(i["f"])("i",{class:"bi bi-pencil-square action-icon"},null,-1),b=[u],f={class:"flex-grow-1"},p={style:{width:"100%"}},m={style:{width:"35%",padding:"0",margin:"0"}},h={class:"d-flex flex-row",style:{width:"100%"}},j=Object(i["f"])("i",{class:"bi bi-arrow-up-short"},null,-1),O=[j],k=Object(i["f"])("div",{class:"flex-grow-1 ps-2"},"Name",-1),g=Object(i["f"])("th",{style:{width:"45%"}},"Purpose",-1),v=Object(i["f"])("th",{style:{width:"20%"}},"Creation date",-1),y={class:"modal fade",id:"new-link-model",tabindex:"-1"},D={class:"modal-dialog modal-dialog-centered"},S={class:"modal-content"},w=Object(i["f"])("div",{class:"modal-header"},[Object(i["f"])("h5",{class:"modal-title"},"New link"),Object(i["f"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),L={class:"modal-body"},x={class:"modal-footer"},C=Object(i["f"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1),E={class:"modal fade",id:"new-folder-model",tabindex:"-1"},F={class:"modal-dialog modal-dialog-centered"},P={class:"modal-content"},N=Object(i["f"])("div",{class:"modal-header"},[Object(i["f"])("h5",{class:"modal-title"},"New category"),Object(i["f"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),R={class:"modal-body"},U={class:"modal-footer"},T=Object(i["f"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1),A={class:"modal fade",id:"edit-link-model",tabindex:"-1"},B={class:"modal-dialog modal-dialog-centered"},J={class:"modal-content"},M=Object(i["f"])("div",{class:"modal-header"},[Object(i["f"])("h5",{class:"modal-title"},"Edit selected link or folder"),Object(i["f"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),I={class:"modal-body"},V={class:"modal-footer"},_=Object(i["f"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1);function q(t,e,n,a,s,u){var j=Object(i["l"])("nav-bar"),q=Object(i["l"])("stored-item");return Object(i["j"])(),Object(i["e"])(i["a"],null,[Object(i["h"])(j,{onExportData:e[0]||(e[0]=function(t){return u.exportData()}),onImportData:u.importData},null,8,["onImportData"]),Object(i["f"])("div",o,[Object(i["f"])("div",l,[r,c,Object(i["f"])("div",{class:Object(i["i"])(["border action-icon-block btn",s.isSomethingSelected?"vimium-button":"disabled"]),title:"Remove",onClick:e[1]||(e[1]=function(t){return u.removeLink()})},d,2),Object(i["f"])("div",{class:Object(i["i"])(["border action-icon-block btn",s.isSomethingSelected?"vimium-button":"disabled"]),title:"Edit","data-bs-toggle":"modal","data-bs-target":"#edit-link-model",onClick:e[2]||(e[2]=function(t){return u.initEditLink()})},b,2)]),Object(i["f"])("main",f,[Object(i["f"])("table",p,[Object(i["f"])("thead",null,[Object(i["f"])("tr",null,[Object(i["f"])("th",m,[Object(i["f"])("div",h,[Object(i["f"])("div",{onClick:e[3]||(e[3]=function(t){return u.goUpFolder()}),class:"flex-center border-end vimium-button"},O),k])]),g,v])]),Object(i["f"])("tbody",null,[(Object(i["j"])(!0),Object(i["e"])(i["a"],null,Object(i["k"])(u.onlyFolders,(function(t){return Object(i["j"])(),Object(i["c"])(q,{key:t.name,onSelectRow:function(e){return u.selectRow(u.linkList.indexOf(t))},onChangeDir:function(e){return u.changeDir(t)},name:t.name,isSelected:t.isSelected,purpose:t.purpose,type:t.type,link:t.link,creationDate:t.creationDate},null,8,["onSelectRow","onChangeDir","name","isSelected","purpose","type","link","creationDate"])})),128)),(Object(i["j"])(!0),Object(i["e"])(i["a"],null,Object(i["k"])(u.onlyLinks,(function(t){return Object(i["j"])(),Object(i["c"])(q,{key:t.name,onSelectRow:function(e){return u.selectRow(u.linkList.indexOf(t))},onChangeDir:function(e){return u.changeDir(t)},name:t.name,isSelected:t.isSelected,purpose:t.purpose,type:t.type,link:t.link,creationDate:t.creationDate},null,8,["onSelectRow","onChangeDir","name","isSelected","purpose","type","link","creationDate"])})),128))])])])]),Object(i["f"])("div",y,[Object(i["f"])("div",D,[Object(i["f"])("div",S,[w,Object(i["f"])("div",L,[Object(i["o"])(Object(i["f"])("input",{class:"form-control mb-2",placeholder:"Name","onUpdate:modelValue":e[4]||(e[4]=function(t){return s.newLinkData.name=t})},null,512),[[i["n"],s.newLinkData.name]]),Object(i["o"])(Object(i["f"])("input",{class:"form-control mb-2",placeholder:"Purpose","onUpdate:modelValue":e[5]||(e[5]=function(t){return s.newLinkData.purpose=t})},null,512),[[i["n"],s.newLinkData.purpose]]),Object(i["o"])(Object(i["f"])("input",{class:"form-control",placeholder:"Link","onUpdate:modelValue":e[6]||(e[6]=function(t){return s.newLinkData.link=t})},null,512),[[i["n"],s.newLinkData.link]])]),Object(i["f"])("div",x,[C,Object(i["f"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[7]||(e[7]=function(t){return u.newLink()})},"Save")])])])]),Object(i["f"])("div",E,[Object(i["f"])("div",F,[Object(i["f"])("div",P,[N,Object(i["f"])("div",R,[Object(i["o"])(Object(i["f"])("input",{class:"form-control mb-2",placeholder:"Name","onUpdate:modelValue":e[8]||(e[8]=function(t){return s.newFolderData.name=t})},null,512),[[i["n"],s.newFolderData.name]])]),Object(i["f"])("div",U,[T,Object(i["f"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[9]||(e[9]=function(t){return u.newFolder()})},"Save")])])])]),Object(i["f"])("div",A,[Object(i["f"])("div",B,[Object(i["f"])("div",J,[M,Object(i["f"])("div",I,[Object(i["o"])(Object(i["f"])("input",{class:"form-control mb-2",placeholder:"Name","onUpdate:modelValue":e[10]||(e[10]=function(t){return s.editLinkData.name=t})},null,512),[[i["n"],s.editLinkData.name]]),"link"==s.editLinkData.type?(Object(i["j"])(),Object(i["e"])(i["a"],{key:0},[Object(i["o"])(Object(i["f"])("input",{class:"form-control mb-2",placeholder:"Purpose","onUpdate:modelValue":e[11]||(e[11]=function(t){return s.editLinkData.purpose=t})},null,512),[[i["n"],s.editLinkData.purpose]]),Object(i["o"])(Object(i["f"])("input",{class:"form-control mb-2",placeholder:"Link","onUpdate:modelValue":e[12]||(e[12]=function(t){return s.editLinkData.link=t})},null,512),[[i["n"],s.editLinkData.link]])],64)):Object(i["d"])("",!0)]),Object(i["f"])("div",V,[_,Object(i["f"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[13]||(e[13]=function(t){return u.editLink()})},"Save")])])])])],64)}n("ac1f"),n("00b4"),n("d3b7"),n("159b"),n("4de4"),n("a434"),n("e9c4"),n("99af"),n("4e82");var $={class:"d-flex flex-row",style:{width:"100%"}},H={class:"flex-grow-1 ps-2"},Y={key:0,class:"bi bi-folder me-1"},z={key:1,class:"bi bi-link me-1"};function G(t,e,n,a,o,l){return Object(i["j"])(),Object(i["e"])("tr",{class:Object(i["i"])(["vimium-button",n.isSelected?"selected":""]),onClick:e[1]||(e[1]=function(t){return l.dblclickHandler()})},[Object(i["f"])("td",null,[Object(i["f"])("div",$,[Object(i["f"])("div",{onClick:e[0]||(e[0]=Object(i["p"])((function(t){return l.selectRow()}),["stop"])),class:"flex-center"},[Object(i["f"])("div",{class:Object(i["i"])(["vimium-button border rounded",n.isSelected?"selected":""])},null,2)]),Object(i["f"])("div",H,["category"==n.type?(Object(i["j"])(),Object(i["e"])("i",Y)):(Object(i["j"])(),Object(i["e"])("i",z)),Object(i["g"])(" "+Object(i["m"])(n.name),1)])])]),Object(i["f"])("td",null,Object(i["m"])(n.purpose),1),Object(i["f"])("td",null,Object(i["m"])(n.creationDate),1)],2)}var K={name:"StoredItem",props:{isSelected:Boolean,type:String,purpose:String,name:String,link:String,creationDate:String},methods:{selectRow:function(){this.$emit("selectRow")},dblclickHandler:function(){"link"==this.type?window.location=this.link:this.$emit("changeDir")}}},Q=n("6b0d"),W=n.n(Q);const X=W()(K,[["render",G]]);var Z=X,tt={class:"navbar navbar-expand-lg navbar-light bg-light px-3 border-bottom"},et=Object(i["f"])("a",{class:"navbar-brand",href:"/"},[Object(i["f"])("strong",{class:"default-font"},"LinkStore")],-1),nt=Object(i["f"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(i["f"])("span",{class:"navbar-toggler-icon"})],-1),it={class:"collapse navbar-collapse",id:"navbarSupportedContent"},at=Object(i["f"])("ul",{class:"navbar-nav me-auto"},null,-1),ot=Object(i["f"])("button",{class:"btn btn-secondary mx-1 border","data-bs-toggle":"modal","data-bs-target":"#import-file-model"},"Import",-1),lt={class:"modal fade",id:"import-file-model",tabindex:"-1"},rt={class:"modal-dialog modal-dialog-centered"},ct={class:"modal-content"},st=Object(i["f"])("div",{class:"modal-header"},[Object(i["f"])("h5",{class:"modal-title"},"Import all links"),Object(i["f"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),dt={class:"modal-body"},ut={class:"modal-footer"},bt=Object(i["f"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1);function ft(t,e,n,a,o,l){return Object(i["j"])(),Object(i["e"])(i["a"],null,[Object(i["f"])("nav",tt,[et,nt,Object(i["f"])("div",it,[at,ot,Object(i["f"])("button",{class:"btn btn-secondary mx-1 border",onClick:e[0]||(e[0]=function(t){return l.exportData()})},"Export")])]),Object(i["f"])("div",lt,[Object(i["f"])("div",rt,[Object(i["f"])("div",ct,[st,Object(i["f"])("div",dt,[Object(i["f"])("input",{class:"form-control mb-2",type:"file",placeholder:"Name",onChange:e[1]||(e[1]=function(){return l.onFileChange&&l.onFileChange.apply(l,arguments)})},null,32)]),Object(i["f"])("div",ut,[bt,Object(i["f"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[2]||(e[2]=function(t){return l.importData()})},"Save")])])])])],64)}var pt={name:"NavBar",methods:{importData:function(){this.$emit("importData",this.importedFile)},onFileChange:function(t){this.importedFile=t.target.files[0]},exportData:function(){this.$emit("exportData")}},emits:["importData","exportData"],data:function(){return{importedFile:null}}};const mt=W()(pt,[["render",ft]]);var ht=mt,jt={components:{StoredItem:Z,NavBar:ht},name:"MainLayout",methods:{selectRow:function(t){this.linkList[t].isSelected=!this.linkList[t].isSelected,this.isSomethingSelected=!1;for(var e=0;e<this.linkList.length;e++)1==this.linkList[e].isSelected&&(this.isSomethingSelected=!0)},newLink:function(){var t=/^(http:|https:)\/\//;t.test(this.newLinkData.link)||(this.newLinkData.link="http://"+this.newLinkData.link),this.linkList.push({name:this.newLinkData.name,purpose:this.newLinkData.purpose,link:this.newLinkData.link,type:"link",creationDate:this.getCurrentDate()}),this.newLinkData={name:"",purpose:"",link:""},this.updateDb()},changeDir:function(t){this.linkList.forEach((function(t){return t.isSelected=!1})),this.currentPath.push(t),this.isSomethingSelected=!1},newFolder:function(){this.linkList.push({name:this.newFolderData.name,type:"category",creationDate:this.getCurrentDate(),isSelected:!1,children:[]}),this.newFolderData={name:"",type:"category",isSelected:!1,children:[]},this.updateDb()},removeLink:function(){var t=this,e=this.linkList.filter((function(t){return t.isSelected}));e.length>0&&e.forEach((function(n,i){return t.linkList.splice(t.linkList.indexOf(e[i]),1)})),this.updateDb()},initEditLink:function(){this.editLinkData.name=this.getSelectedEntry().name,this.editLinkData.type=this.getSelectedEntry().type,this.editLinkData.purpose=this.getSelectedEntry().purpose,this.editLinkData.link=this.getSelectedEntry().link},getSelectedEntry:function(){return 0==this.linkList.filter((function(t){return 1==t.isSelected})).length?null:this.linkList.filter((function(t){return 1==t.isSelected}))[0]},editLink:function(){this.getSelectedEntry().name=this.editLinkData.name,this.getSelectedEntry().type=this.editLinkData.type,this.getSelectedEntry().purpose=this.editLinkData.purpose,this.getSelectedEntry().link=this.editLinkData.link,this.updateDb()},goUpFolder:function(){this.linkList.forEach((function(t){return t.isSelected=!1})),this.currentPath!=[]&&this.currentPath.pop()},updateDb:function(){var t=this;this.linkList.forEach((function(t){return t.isSelected=!1}));var e=this.db.transaction("links","readwrite"),n=e.objectStore("links");n.clear();for(var i=function(e){console.log("Updating db"),console.log(JSON.parse(JSON.stringify(t.linkTree[e])));var i=n.add(JSON.parse(JSON.stringify(t.linkTree[e])));i.onsuccess=function(){console.log("Successfully copied to db",i.result)},i.onerror=function(){console.error("Error",i.error)}},a=0;a<this.linkTree.length;a++)i(a)},getCurrentDate:function(){var t=new Date,e=t.getDate(),n=t.getMonth()+1,i=t.getFullYear();return"".concat(i,"-").concat(n,"-").concat(e)},download:function(t,e){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},exportData:function(){var t=this,e=this.db.transaction("links","readonly"),n=e.objectStore("links"),i=n.getAll(),a="";i.onsuccess=function(){a=JSON.stringify(i.result),t.download("linkstore-export.json",a)}},importData:function(t){var e=this;console.log(t);var n=new FileReader,i=null;n.readAsText(t),n.onload=function(){i=n.result,i=JSON.parse(i);var t=e.db.transaction("links","readwrite"),a=t.objectStore("links");a.clear();for(var o=0;o<i.length;o++)a.add(i[o]);window.location.reload()}}},beforeMount:function(){var t=this;console.log("Start initing db"),this.indexedDBRequest=indexedDB.open("LinkStoreDB",1);var e=this.indexedDBRequest;e.onupgradeneeded=function(){var t=e.result;t.objectStoreNames.contains("links")||t.createObjectStore("links",{keyPath:"name"})},e.onerror=function(){console.error("Error",e.error)},e.onsuccess=function(){t.db=e.result,console.log(t);var n=t.db.transaction("links","readonly"),i=n.objectStore("links"),a=i.getAll();a.onsuccess=function(){console.log(a.result),t.linkTree=a.result}}},computed:{onlyFolders:function(){var t=this.linkList;return t=t.filter((function(t){return"category"==t.type})),t=t.sort((function(t,e){var n=t.name.toUpperCase(),i=e.name.toUpperCase();return n<i?-1:n>i?1:0})),t},onlyLinks:function(){var t=this.linkList;return t=t.filter((function(t){return"link"==t.type})),t=t.sort((function(t,e){var n=t.name.toUpperCase(),i=e.name.toUpperCase();return n<i?-1:n>i?1:0})),t},currentFolder:function(){return this.currentPath[this.currentPath.length-1]},linkList:function(){return null!=this.currentFolder?this.currentFolder.children:this.linkTree}},data:function(){return{linkTree:[],newLinkData:{name:"",purpose:"",link:""},newFolderData:{name:""},editLinkData:{name:"",purpose:"",link:"",type:""},currentPath:[],isSomethingSelected:!1,indexedDBRequest:null,db:null}}};n("b424");const Ot=W()(jt,[["render",q]]);var kt=Ot,gt={name:"App",components:{MainLayout:kt}};const vt=W()(gt,[["render",a]]);var yt=vt;n("ab8b"),n("7b17"),n("1f68"),n("bf35");Object(i["b"])(yt).mount("#app")},b424:function(t,e,n){"use strict";n("df97")},bf35:function(t,e,n){},df97:function(t,e,n){}});
//# sourceMappingURL=app.dcfa2946.js.map